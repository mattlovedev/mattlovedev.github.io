import{r as St,c as E,a as i,b as t,d as V,w as j,u as y,F as $,e as x,t as b,f as B,o as a,n as _t,g as k,i as H,h as D,v as S,j as P,p as Y,k as K,l as O,m as Z,q as Ut,s as Et,x as G,y as Vt,z as Ft,A as Tt}from"./vendor.68ddd59f.js";const jt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const _ of u.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function s(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerpolicy&&(u.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?u.credentials="include":r.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function c(r){if(r.ep)return;r.ep=!0;const u=s(r);fetch(r.href,u)}};jt();const Ot="https://mattlove.dev";async function Q(n,e){e.credentials="include";const s=await fetch(Ot+n,e);if(s.ok){if(s.status==204)return}else{const r=await s.text();throw new Error(r)}return await s.json()}function N(n){return Q(n,{method:"GET"})}function W(n,e){return Q(n,{method:"POST",body:JSON.stringify(e)})}function ht(n){return Q(n,{method:"DELETE"})}function vt(n,e){return Q(n,{method:"PATCH",body:JSON.stringify(e)})}function tt(n,e){return Q(n,{method:"PUT",body:JSON.stringify(e)})}const yt=()=>({transactions:[],xeffect:{defs:{daily:[],weekly:[]},week:{days:{},completed:{}}},habits:{defs:[],summary:[]},food:[],journal:[],goals:{},lists:{}}),T=St({auth:!0,state:yt(),error:null}),U=async n=>{try{await n()}catch(e){T.error=e}},mt=()=>T.auth,Lt=()=>T.error,F=()=>T.state,ft=async()=>{try{T.state=await N("/api/state")}catch{T.auth=!1}},ot=()=>{T.error=null},Nt=()=>{T.state=yt()},it=n=>{n?ft():Nt(),T.auth=n};const Pt={class:"container"},Ht={class:"navbar navbar-default"},Wt={class:"container-fluid"},It={class:"navbar-header"},Mt=t("i",{class:"icon-logo"},null,-1),At={class:"nav navbar-nav"},Yt={class:"nav-item"},Gt=["innerHTML"],Rt={key:0},Jt={key:1},qt={setup(n){const e=E(Lt);ft();const s=["budget","xeffect","habits","food","journal","goals"],c=["glyphicon-usd","glyphicon-remove","glyphicon-repeat","glyphicon-cutlery","glyphicon-book","glyphicon-screenshot"],r=E(()=>mt()?'<span class="glyphicon glyphicon-log-out"></span':'<span class="glyphicon glyphicon-log-in"></span');return(u,_)=>{const m=B("router-link"),h=B("router-view");return a(),i("div",Pt,[t("nav",Ht,[t("div",Wt,[t("div",It,[V(m,{to:"/",class:"navbar-brand",onClick:y(ot)},{default:j(()=>[Mt]),_:1},8,["onClick"])]),t("ul",At,[(a(),i($,null,x(s,(v,o)=>t("li",{key:v,class:"nav-item"},[V(m,{to:"/"+v,class:_t(["navlink glyphicon",c[o]]),onClick:y(ot)},null,8,["to","class","onClick"])])),64)),t("li",Yt,[V(m,{to:"/login",class:"navlink",onClick:y(ot)},{default:j(()=>[t("span",{innerHTML:y(r)},null,8,Gt)]),_:1},8,["onClick"])])])])]),y(e)?(a(),i("div",Rt,"Oops! Error encountered: "+b(y(e).message),1)):(a(),i("div",Jt,[V(h)]))])}}};var Bt=(n,e)=>{const s=n.__vccOpts||n;for(const[c,r]of e)s[c]=r;return s};const Kt={};function Qt(n,e){return a(),i("div",null,"mattlove.dev")}var I=Bt(Kt,[["render",Qt]]);const M=E(()=>F().transactions),X=()=>{const n=new Date;return{year:n.getFullYear(),month:n.getMonth()+1}},lt=n=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.month-1]+" "+n.year,R={curYearMonth:X(),display:k(lt(X()))},zt=()=>M,Xt=n=>{U(async()=>{await ht("/api/budget/transactions/"+n);for(let[e,s]of M.value.entries())if(s.id==n){M.value.splice(e,1);break}})},Zt=n=>{U(async()=>{if(n.id){const e=await tt("/api/budget/transactions/"+n.id,n);for(let[s,c]of M.value.entries())if(c.id==e.id){M.value[s]=e;break}}else{let e=await W("/api/budget/transactions",n);M.value.unshift(e)}})},ut={page:(n,e=R.curYearMonth)=>{if(n==="prev"&&--e.month==0)e.month=12,e.year--;else if(n==="next"){const c=X();if(c.month==e.month&&c.year==e.year)return;++e.month==13&&(e.month=1,e.year++)}else if(n==="home"){const c=X();if(c.month==e.month&&c.year==e.year)return;e.month=c.month,e.year=c.year}const s=e.month>9?e.year+""+e.month:e.year+"0"+e.month;U(async()=>{F().transactions=await N("/api/budget/transactions?yearmonth="+s),R.display.value=lt(e)})},display:R.display},te=(n,e=R.curYearMonth)=>{if(n){e.year=Number(n.substring(0,4)),e.month=Number(n.substring(4));const s=e.month>9?e.year+""+e.month:e.year+"0"+e.month;U(async()=>{const c=await N("/api/budget/transactions?yearmonth="+s);F().transactions=c,R.display.value=lt(e)})}},bt={setup(n){const{page:e,display:s}=H("pagerProps");return(c,r)=>(a(),i($,null,[t("span",null,[t("button",{class:"btn btn-primary glyphicon glyphicon-arrow-left",type:"button",onClick:r[0]||(r[0]=u=>y(e)("prev"))}),t("button",{class:"btn btn-primary glyphicon glyphicon-home",type:"button",onClick:r[1]||(r[1]=u=>y(e)("home"))}),t("button",{class:"btn btn-primary glyphicon glyphicon-arrow-right",type:"button",onClick:r[2]||(r[2]=u=>y(e)("next"))})]),t("h3",null,b(y(s)),1)],64))}},ee={class:"form-inline"},ne={key:0},oe=["onUpdate:modelValue"],se={key:1},le=["onUpdate:modelValue","placeholder"],ae={key:2},ce=["onUpdate:modelValue","placeholder"],ie={setup(n){const{definition:e}=H("editableFormTableProps"),{getModels:s,clickSubmitHandler:c,clickCancelHandler:r}=H("editableFormTableInternalProps"),u=E(s);return(_,m)=>(a(),i("div",null,[t("form",ee,[(a(!0),i($,null,x(y(e),(h,v)=>(a(),i("span",{key:v},[h=="date"?(a(),i("span",ne,[D(t("input",{class:"form-control",type:"datetime-local","onUpdate:modelValue":o=>y(u)[v].value=o},null,8,oe),[[S,y(u)[v].value]])])):h=="money"?(a(),i("span",se,[D(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o=>y(u)[v].value=o,placeholder:v},null,8,le),[[S,y(u)[v].value,void 0,{number:!0}]])])):h=="string"||h=="stringarray"?(a(),i("span",ae,[D(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o=>y(u)[v].value=o,placeholder:v},null,8,ce),[[S,y(u)[v].value]])])):P("",!0)]))),128)),t("button",{class:"btn btn-success form-control",type:"button",onClick:m[0]||(m[0]=(...h)=>y(c)&&y(c)(...h))},"submit"),t("button",{class:"btn btn-danger",type:"button",onClick:m[1]||(m[1]=(...h)=>y(r)&&y(r)(...h))},"cancel")])]))}},et=1e3,nt=60,ue=nt*et,at=60,re=nt*at,de=re*et,gt=24,pe=7,_e=et*nt*at*gt,he=et*nt*at*gt*pe;function ve(n,e){return n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate()}function ye(n,e){var s=n.getHours()*de+n.getMinutes()*ue;return n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate()||n-e>0&&n-e<_e+s}function me(n,e){return n-e>0&&n-e<he}function L(n){const e=new Date(n*1e3),s=new Date;var c,r;return ve(s,e)?c="Today, "+e.toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):ye(s,e)?c="Yesterday, "+e.toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):me(s,e)?c=e.toLocaleString("en-US",{weekday:"short",hour:"numeric",minute:"2-digit"}):c=e.toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),r=e.toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),{short:c,long:r}}function fe(n){const e=new Date(n*1e3);return e.getFullYear()+"-"+e.toLocaleString("en-US",{month:"2-digit"})+"-"+e.toLocaleString("en-US",{day:"2-digit"})+"T"+e.toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function J(){const n=new Date;return n.getFullYear()+"-"+n.toLocaleString("en-US",{month:"2-digit"})+"-"+n.toLocaleString("en-US",{day:"2-digit"})+"T"+n.toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function kt(n,e){const s=u=>{const _=u.getMonth()+1,m=u.getDate(),h=_>9?""+_:"0"+_,v=m>9?""+m:"0"+m;return u.getFullYear()+"-"+h+"-"+v},c=new Date(n,0,1);for(;c.getDay()!=1;)c.setDate(c.getDate()+1);c.setDate(c.getDate()+7*(e-1));const r=[];for(let u=0;u<7;u++)r.push(s(c)),c.setDate(c.getDate()+1);return r}const be={class:"table table-bordered table-hover"},ge=t("th",null,"actions",-1),ke=["title"],$e={key:1},we={key:2},Ce={key:3},De=["onClick"],xe=["onClick"],Se={setup(n){const{setObjInEdit:e,clickDeleteHandler:s}=H("editableFormTableInternalProps"),{definition:c,getList:r}=H("editableFormTableProps"),u=r();return(_,m)=>(a(),i("div",null,[t("table",be,[t("thead",null,[t("tr",null,[(a(!0),i($,null,x(y(c),(h,v)=>(a(),i("th",{key:v},b(v),1))),128)),ge])]),t("tbody",null,[(a(!0),i($,null,x(y(u),h=>(a(),i("tr",{key:h.id},[(a(!0),i($,null,x(y(c),(v,o)=>{var l;return a(),i("td",{key:h.id+o},[v=="date"?(a(),i("span",{key:0,"data-toggle":"tooltip",title:y(L)(h[o]).long},b(y(L)(h[o]).short),9,ke)):v=="money"?(a(),i("span",$e,b((h[o]/100).toFixed(2)),1)):v=="string"||v=="number"?(a(),i("span",we,b(h[o]),1)):v=="stringarray"?(a(),i("span",Ce,b((l=h[o])==null?void 0:l.join(" ")),1)):P("",!0)])}),128)),t("td",null,[t("button",{class:"btn btn-warning glyphicon glyphicon-pencil",type:"button",onClick:v=>y(e)(h)},null,8,De),t("button",{class:"btn btn-danger glyphicon glyphicon-trash",type:"button",onClick:v=>y(s)(h.id)},null,8,xe)])]))),128))])])]))}},$t={setup(n){const{definition:e,onClickSubmit:s,onClickDelete:c}=H("editableFormTableProps"),r=k(null),u=Object.entries(e).reduce((o,[l,d])=>{switch(d){case"date":o[l]=k(J());break;case"money":case"string":case"stringarray":o[l]=k("");break}return o},{}),_=o=>{Object.entries(e).forEach(([l,d])=>{var p;switch(d){case"date":u[l].value=fe(o[l]);break;case"money":u[l].value=String((o[l]/100).toFixed(2));break;case"string":u[l].value=o[l];break;case"stringarray":u[l].value=(p=o[l])==null?void 0:p.join(" ");break}}),r.value=o.id},m=()=>{Object.entries(e).forEach(([o,l])=>{switch(l){case"date":u[o].value=J();break;case"money":u[o].value="";break;case"string":u[o].value="";break;case"stringarray":u[o].value="";break}}),r.value=null};return Y("editableFormTableInternalProps",{clickSubmitHandler:()=>{s(Object.entries(e).reduce((o,[l,d])=>{var p;switch(d){case"date":o[l]=Date.parse(u[l].value)/1e3,u[l].value=J();break;case"money":o[l]=Math.round(u[l].value*100),u[l].value="";break;case"string":o[l]=u[l].value,u[l].value="";break;case"stringarray":o[l]=((p=u[l].value)==null?void 0:p.length)>0?u[l].value.split(" "):[],u[l].value="";break}return o},r.value!=null?{id:r.value}:{})),r.value=null},clickCancelHandler:m,clickDeleteHandler:o=>{r.value!=null&&m(),c(o)},getModels:()=>u,setObjInEdit:_}),(o,l)=>(a(),i("div",null,[V(ie),V(Se)]))}},rt={setup(n){return Y("editableFormTableProps",{definition:{date:"date",amount:"money",description:"string",location:"string",withwho:"stringarray",tags:"stringarray"},getList:zt,onClickDelete:Xt,onClickSubmit:Zt}),Y("pagerProps",{page:ut.page,display:ut.display}),te(K().params.yearmonth),(s,c)=>(a(),i("div",null,[V(bt),V($t)]))}},Ue=E(()=>F().xeffect.defs),wt=E(()=>F().xeffect.week),g=(()=>{const n=new Date().getFullYear(),e=(()=>{const s=new Date,c=new Date(s.getFullYear(),0,1),r=new Date(s.getFullYear(),s.getMonth(),s.getDate());for(;c.getDay()!=1;)c.setDate(c.getDate()+1);for(;r.getDay()!=1;)r.setDate(r.getDate()-1);const u=0;return(r-c+u)/(24*60*60*1e3)/7+1})();return{defaultYear:n,defaultWeek:e,year:n,week:e,dates:k(kt(n,e)),display:k(n+" Week "+e)}})(),dt={page:n=>{if(n==="prev"&&--g.week==0)g.week=52,g.year--;else if(n==="next"){if(g.week==g.defaultWeek&&g.year==g.defaultYear)return;++g.week==53&&(g.week=1,g.year++)}else if(n==="home"){if(g.week==g.defaultWeek&&g.year==g.defaultYear)return;g.year=g.defaultYear,g.week=g.defaultWeek}const e=g.week>9?g.year+"-"+g.week:g.year+"-0"+g.week;U(async()=>{F().xeffect.week=await N("/api/xeffect/week/"+e),g.dates.value=kt(g.year,g.week),g.display.value=g.year+" Week "+g.week})},display:g.display},Ct=()=>Ue,Ee=()=>wt,Ve=()=>g.dates,Fe=n=>{U(async()=>{F().xeffect.defs=await tt("/api/xeffect/defs",n)})},pt=n=>{U(async()=>{F().xeffect.week=await vt("/api/xeffect/week/"+wt.value.week,n)})},Te=n=>{const e=k([]);return U(async()=>{e.value=await N("/api/xeffect/events/"+n)}),e};const je={class:"table table-bordered"},Oe={colspan:"8"},Le=t("th",null,null,-1),Ne=["onClick"],Pe=["onClick"],He={class:"table table-bordered"},We={colspan:"2"},Ie=["onClick"],Me=["onClick"],Ae=O(" Edit "),Ye={setup(n){const e=Ct(),s=Ee(),c=Ve(),r=E(()=>{const o=["M","T","W","T","F","S","S"],l=[];for(let d in c.value){const p=new Date(c.value[d]);p.setDate(p.getDate()+1),l.push(o[d]+" - "+p.getDate())}return l}),u=(o,l,d)=>{const p={op:"add",value:d};o=="daily"?p.path="/days/"+l:p.path="/completed",pt(p)},_=(o,l,d)=>{const p={op:"remove",value:d};o=="daily"?p.path="/days/"+l:p.path="/completed",pt(p)},m=E(()=>{const o={};for(const l of e.value.daily)o[l.id]=0;for(const[l,d]of Object.entries(s.value.days))for(const p in d)o[p]+=1;return o}),h=E(()=>{const o={total:0};for(const l of c.value)s.value.days[l]?(o[l]=Object.keys(s.value.days[l]).length,o.total+=o[l]):o[l]=0;return o}),v=E(()=>Object.keys(s.value.completed).length);return Y("pagerProps",{page:dt.page,display:dt.display}),(o,l)=>{const d=B("router-link");return a(),i($,null,[V(bt),t("table",je,[t("thead",null,[t("tr",null,[t("th",Oe,"Daily ("+b(y(h).total)+")",1)]),t("tr",null,[Le,(a(!0),i($,null,x(y(r),(p,f)=>(a(),i("th",{key:p},b(p)+" ("+b(y(h)[y(c)[f]])+") ",1))),128))])]),t("tbody",null,[(a(!0),i($,null,x(y(e).daily,p=>(a(),i("tr",{key:p.id},[t("th",null,[V(d,{to:{name:"xeffectEvents",params:{id:p.id}}},{default:j(()=>[O(b(p.value),1)]),_:2},1032,["to"]),O(" ("+b(y(m)[p.id])+") ",1)]),(a(!0),i($,null,x(y(c),f=>(a(),i("td",{key:f+p.id},[y(s).days[f]&&y(s).days[f][p.id]?(a(),i("span",{key:0,class:"spanEvent completedEvent",onClick:C=>_("daily",f,p.id)},"\xA0",8,Ne)):(a(),i("span",{key:1,class:"spanEvent clickableEvent",onClick:C=>u("daily",f,p.id)},"\xA0",8,Pe))]))),128))]))),128))])]),t("table",He,[t("thead",null,[t("tr",null,[t("th",We,"Weekly ("+b(y(v))+")",1)])]),t("tbody",null,[(a(!0),i($,null,x(y(e).weekly,p=>(a(),i("tr",{key:p.id},[t("th",null,[V(d,{to:{name:"xeffectEvents",params:{id:p.id}}},{default:j(()=>[O(b(p.value),1)]),_:2},1032,["to"])]),t("td",null,[y(s).completed[p.id]?(a(),i("span",{key:0,class:"spanEvent completedEvent",onClick:f=>_("weekly","",p.id)},"\xA0",8,Ie)):(a(),i("span",{key:1,class:"spanEvent clickableEvent",onClick:f=>u("weekly","",p.id)},"\xA0",8,Me))])]))),128))])]),V(d,{to:{name:"xeffectDefs"}},{default:j(()=>[Ae]),_:1})],64)}}};const Ge={class:"table table-bordered"},Re=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"Daily")])],-1),Je=["onUpdate:modelValue"],qe=["onClick"],Be=t("span",{class:"glyphicon glyphicon-arrow-up"},null,-1),Ke=[Be],Qe=["onClick"],ze=t("span",{class:"glyphicon glyphicon-arrow-down"},null,-1),Xe=[ze],Ze=["onClick"],tn=t("span",{class:"glyphicon glyphicon-trash"},null,-1),en=[tn],nn=t("span",{class:"glyphicon glyphicon-plus"},null,-1),on=[nn],sn=t("br",null,null,-1),ln={class:"table table-bordered"},an=t("thead",null,[t("tr",null,[t("th",{colspan:"3"},"Weekly")])],-1),cn=["onUpdate:modelValue"],un=["onClick"],rn=t("span",{class:"glyphicon glyphicon-arrow-up"},null,-1),dn=[rn],pn=["onClick"],_n=t("span",{class:"glyphicon glyphicon-arrow-down"},null,-1),hn=[_n],vn=["onClick"],yn=t("span",{class:"glyphicon glyphicon-trash"},null,-1),mn=[yn],fn=t("span",{class:"glyphicon glyphicon-plus"},null,-1),bn=[fn],gn=t("br",null,null,-1),kn={setup(n){const e=Ct(),s=k((()=>{const o={daily:[],weekly:[]};for(const l of e.value.daily)o.daily.push({id:l.id,value:k(l.value)});for(const l of e.value.weekly)o.weekly.push({id:l.id,value:k(l.value)});return o})()),c=o=>{s.value[o].push({id:"",value:k("")})},r=(o,l)=>{s.value[o].splice(l,1)},u=(o,l)=>{l>0&&([s.value[o][l-1],s.value[o][l]]=[s.value[o][l],s.value[o][l-1]])},_=(o,l)=>{l<s.value[o].length-1&&([s.value[o][l+1],s.value[o][l]]=[s.value[o][l],s.value[o][l+1]])},m=Z(),h=()=>{m.push({name:"xeffect"})},v=()=>{const o={daily:[],weekly:[]};for(const l of s.value.daily)o.daily.push({id:l.id,value:l.value});for(const l of s.value.weekly)o.weekly.push({id:l.id,value:l.value});Fe(o),m.push({name:"xeffect"})};return(o,l)=>(a(),i($,null,[t("table",Ge,[Re,t("tbody",null,[(a(!0),i($,null,x(s.value.daily,(d,p)=>(a(),i("tr",{key:d.id},[t("td",null,b(d.id),1),t("td",null,[D(t("input",{type:"text","onUpdate:modelValue":f=>d.value=f},null,8,Je),[[S,d.value]])]),t("td",null,[t("button",{class:"button",onClick:f=>u("daily",p)},Ke,8,qe),t("button",{class:"button",onClick:f=>_("daily",p)},Xe,8,Qe),t("button",{class:"button",onClick:f=>r("daily",p)},en,8,Ze)])]))),128))])]),t("button",{type:"button",onClick:l[0]||(l[0]=d=>c("daily"))},on),sn,t("table",ln,[an,t("tbody",null,[(a(!0),i($,null,x(s.value.weekly,(d,p)=>(a(),i("tr",{key:d.id},[t("td",null,b(d.id),1),t("td",null,[D(t("input",{type:"text","onUpdate:modelValue":f=>d.value=f},null,8,cn),[[S,d.value]])]),t("td",null,[t("button",{class:"button",onClick:f=>u("weekly",p)},dn,8,un),t("button",{class:"button",onClick:f=>_("weekly",p)},hn,8,pn),t("button",{class:"button",onClick:f=>r("weekly",p)},mn,8,vn)])]))),128))])]),t("button",{type:"button",onClick:l[1]||(l[1]=d=>c("weekly"))},bn),gn,t("input",{type:"button",value:"cancel",onClick:l[2]||(l[2]=d=>h())}),t("input",{type:"button",value:"submit",onClick:l[3]||(l[3]=d=>v())})],64))}},$n=t("br",null,null,-1),wn={class:"table table-bordered"},Cn=t("thead",null,[t("tr",null,[t("th",null,"Completed")])],-1),Dn={setup(n){const e=Z(),s=Te(K().params.id),c=()=>{e.push({name:"xeffect"})};return(r,u)=>(a(),i($,null,[t("button",{class:"btn btn-primary glyphicon glyphicon-chevron-left",type:"button",onClick:u[0]||(u[0]=_=>c())}),$n,t("table",wn,[Cn,t("tbody",null,[(a(!0),i($,null,x(y(s),_=>(a(),i("tr",null,[t("td",null,b(_),1)]))),256))])])],64))}},ct=()=>E(()=>F().habits.defs),xn=()=>E(()=>F().habits.summary),Sn=n=>{U(async()=>{F().habits.summary=await W("/api/habits/reset/"+n)})},Un=n=>{U(async()=>{F().habits.summary=await W("/api/habits/event",n)})},En=n=>{U(async()=>{F().habits=await tt("/api/habits/defs",n)})},Vn=n=>{const e=k([]);return U(async()=>{e.value=await N("/api/habits/events/"+n)}),e},Fn={key:0},Tn={class:"table table-bordered"},jn={colspan:"2"},On=t("th",null,"date",-1),Ln=["onUpdate:modelValue"],Nn=["onUpdate:modelValue"],Pn=["onUpdate:modelValue"],Hn=["onUpdate:modelValue"],Wn=["onUpdate:modelValue"],In=["onUpdate:modelValue"],Mn={class:"table table-bordered"},An=t("thead",null,[t("tr",null,[t("th",null,"habit"),t("th",null,"last"),t("th",null,"since")])],-1),Yn=["onClick"],Gn=t("span",{class:"glyphicon glyphicon-plus"},null,-1),Rn=[Gn],Jn=["onClick"],qn=t("span",{class:"glyphicon glyphicon-refresh"},null,-1),Bn=[qn],Kn=O(" Edit "),Qn={setup(n){const e=ct(),s=xn();function c(l){return l===0?"never":L(l).short}const r=k(null),u=k(null),_=k(null),m=l=>{const d=e.value[l];if(r.value=d,u.value=J(),_.value={},d.schema)for(const[p,f]of Object.entries(d.schema))switch(f){case"text":case"listtext":case"duration":_.value[p]=k("");break;case"number":case"money":_.value[p]=k(0);break;case"date":_.value[p]=k(J());break}},h=l=>{const d=e.value[l].id;Sn(d)},v=()=>{r.value=null,u.value=null,_.value=null},o=()=>{const l={habit:r.value.id,date:Date.parse(u.value)/1e3};if(r.value.schema){l.props={};for(const[d,p]of Object.entries(r.value.schema))switch(p){case"listtext":l.props[d]=_.value[d].length>0?_.value[d].split(" "):[];break;case"money":l.props[d]=Math.round(_.value[d]*100);break;case"date":l.props[d]=Date.parse(_.value[d])/1e3;break;default:l.props[d]=_.value[d]}}Un(l),v()};return(l,d)=>{const p=B("router-link");return a(),i($,null,[r.value?(a(),i("div",Fn,[t("table",Tn,[t("tbody",null,[t("tr",null,[t("th",jn,b(r.value.value),1)]),t("tr",null,[On,t("td",null,[D(t("input",{type:"datetime-local","onUpdate:modelValue":d[0]||(d[0]=f=>u.value=f)},null,512),[[S,u.value]])])]),r.value.schema?(a(!0),i($,{key:0},x(Object.entries(r.value.schema),([f,C])=>(a(),i("tr",null,[t("th",null,b(f),1),t("td",null,[C=="text"?D((a(),i("input",{key:0,type:"text","onUpdate:modelValue":w=>_.value[f]=w},null,8,Ln)),[[S,_.value[f]]]):C=="listtext"?D((a(),i("input",{key:1,type:"text","onUpdate:modelValue":w=>_.value[f]=w},null,8,Nn)),[[S,_.value[f]]]):C=="duration"?D((a(),i("input",{key:2,type:"text","onUpdate:modelValue":w=>_.value[f]=w},null,8,Pn)),[[S,_.value[f]]]):C=="number"?D((a(),i("input",{key:3,type:"text","onUpdate:modelValue":w=>_.value[f]=w},null,8,Hn)),[[S,_.value[f],void 0,{number:!0}]]):C=="money"?D((a(),i("input",{key:4,type:"text","onUpdate:modelValue":w=>_.value[f]=w},null,8,Wn)),[[S,_.value[f],void 0,{number:!0}]]):C=="date"?D((a(),i("input",{key:5,type:"datetime-local","onUpdate:modelValue":w=>_.value[f]=w},null,8,In)),[[S,_.value[f]]]):P("",!0)])]))),256)):P("",!0)])]),t("input",{type:"button",value:"cancel",onClick:v}),t("input",{type:"button",value:"submit",onClick:o})])):P("",!0),t("table",Mn,[An,t("tbody",null,[(a(!0),i($,null,x(y(s),(f,C)=>(a(),i("tr",null,[t("td",null,[V(p,{to:{name:"habitsEvents",params:{id:y(e)[C].id}}},{default:j(()=>[O(b(y(e)[C].value),1)]),_:2},1032,["to"])]),t("td",null,b(c(f.last)),1),t("td",null,b(f.timeSince),1),t("td",null,[t("button",{type:"button",onClick:w=>m(C)},Rn,8,Yn),t("button",{type:"button",onClick:w=>h(C)},Bn,8,Jn)])]))),256))])]),V(p,{to:{name:"habitsDefs"}},{default:j(()=>[Kn]),_:1})],64)}}},zn={class:"table table-bordered"},Xn=["onUpdate:modelValue"],Zn=["onClick"],to=t("span",{class:"glyphicon glyphicon-arrow-up"},null,-1),eo=[to],no=["onClick"],oo=t("span",{class:"glyphicon glyphicon-arrow-down"},null,-1),so=[oo],lo=["onClick"],ao=t("span",{class:"glyphicon glyphicon-trash"},null,-1),co=[ao],io=["onUpdate:modelValue"],uo=["onUpdate:modelValue"],ro=t("option",null,"date",-1),po=t("option",null,"number",-1),_o=t("option",null,"text",-1),ho=t("option",null,"duration",-1),vo=t("option",null,"listtext",-1),yo=t("option",null,"money",-1),mo=[ro,po,_o,ho,vo,yo],fo=["onClick"],bo=t("span",{class:"glyphicon glyphicon-trash"},null,-1),go=[bo],ko={colspan:"3"},$o=["onClick"],wo=t("span",{class:"glyphicon glyphicon-plus"},null,-1),Co=[wo],Do=t("span",{class:"glyphicon glyphicon-plus"},null,-1),xo=[Do],So=t("br",null,null,-1),Uo=t("br",null,null,-1),Eo={setup(n){const e=ct(),s=k((()=>{const d=[];for(const p of e.value){const f={id:p.id,value:p.value,schema:[]};if(p.schema)for(const[C,w]of Object.entries(p.schema))f.schema.push({field:C,type:w});d.push(f)}return d})()),c=d=>{d>0&&([s.value[d-1],s.value[d]]=[s.value[d],s.value[d-1]])},r=d=>{d<s.value.length-1&&([s.value[d+1],s.value[d]]=[s.value[d],s.value[d+1]])},u=d=>{s.value.splice(d,1)},_=(d,p)=>{s.value[d].schema.splice(p,1)},m=d=>{s.value[d].schema.push({field:"",type:"text"})},h=()=>{s.value.push({id:"",value:"",schema:[]})},v=Z(),o=()=>{v.push({name:"habits"})},l=()=>{const d=[];for(const p of s.value){const f={id:p.id,value:p.value};if(p.schema.length>0){f.schema={};for(const C of p.schema)f.schema[C.field]=C.type}d.push(f)}En(d),v.push({name:"habits"})};return(d,p)=>(a(),i($,null,[(a(!0),i($,null,x(s.value,(f,C)=>(a(),i("table",zn,[t("thead",null,[t("tr",null,[t("th",null,b(f.id),1),t("th",null,[D(t("input",{type:"text","onUpdate:modelValue":w=>f.value=w},null,8,Xn),[[S,f.value]])]),t("td",null,[t("button",{class:"button",onClick:w=>c(C)},eo,8,Zn),t("button",{class:"button",onClick:w=>r(C)},so,8,no),t("button",{class:"button",onClick:w=>u(C)},co,8,lo)])])]),t("tbody",null,[(a(!0),i($,null,x(f.schema,(w,xt)=>(a(),i("tr",null,[t("td",null,[D(t("input",{type:"text","onUpdate:modelValue":z=>w.field=z},null,8,io),[[S,w.field]])]),t("td",null,[D(t("select",{"onUpdate:modelValue":z=>w.type=z},mo,8,uo),[[Ut,w.type]])]),t("td",null,[t("button",{class:"button",onClick:z=>_(C,xt)},go,8,fo)])]))),256)),t("tr",null,[t("td",ko,[t("button",{class:"button",onClick:w=>m(C)},Co,8,$o)])])])]))),256)),t("button",{class:"button",onClick:h},xo),So,Uo,t("input",{type:"button",value:"cancel",onClick:o}),t("input",{type:"button",value:"submit",onClick:l})],64))}},Vo={class:"table table-bordered table-hover"},Fo=["title"],To={key:1},jo={key:2},Oo={key:3},Lo={setup(n){const{definition:e,getList:s}=H("viewableTableProps"),c=E(()=>s());return(r,u)=>(a(),i("div",null,[t("table",Vo,[t("thead",null,[t("tr",null,[(a(!0),i($,null,x(y(e),(_,m)=>(a(),i("th",null,b(m),1))),256))])]),t("tbody",null,[(a(!0),i($,null,x(y(c).value,_=>(a(),i("tr",null,[(a(!0),i($,null,x(y(e),(m,h)=>{var v;return a(),i("td",null,[m=="date"?(a(),i("span",{key:0,"data-toggle":"tooltip",title:y(L)(_[h]).long},b(y(L)(_[h]).short),9,Fo)):m=="money"?(a(),i("span",To,b((_[h]/100).toFixed(2)),1)):m=="text"||m=="number"||m=="duration"?(a(),i("span",jo,b(_[h]),1)):m=="listtext"?(a(),i("span",Oo,b((v=_[h])==null?void 0:v.join(" ")),1)):P("",!0)])}),256))]))),256))])])]))}},No=t("br",null,null,-1),Po={setup(n){const e=Z(),s=ct(),c=Vn(K().params.id),r=E(()=>{for(const m of c.value)if(m.props)for(const[h,v]of Object.entries(m.props))m[h]=v;return c.value}),u={date:"date"};for(const m of s.value)if(m.id==K().params.id){if(m.schema)for(const[h,v]of Object.entries(m.schema))u[h]=v;break}Y("viewableTableProps",{definition:u,getList:()=>r});const _=()=>{e.push({name:"habits"})};return(m,h)=>(a(),i($,null,[t("button",{class:"btn btn-primary glyphicon glyphicon-chevron-left",type:"button",onClick:h[0]||(h[0]=v=>_())}),No,V(Lo)],64))}},A=E(()=>F().food),Ho=()=>A,Wo=n=>{U(async()=>{await ht("/api/food/"+n);for(let[e,s]of A.value.entries())if(s.id==n){A.value.splice(e,1);break}})},Io=n=>{U(async()=>{if(n.id){const e=await tt("/api/food/"+n.id,n);for(let[s,c]of A.value.entries())if(c.id==n.id){A.value[s]=e;break}}else{const e=await W("/api/food",n);A.value.unshift(e)}})},Mo={setup(n){return Y("editableFormTableProps",{definition:{when:"date",what:"string",where:"string",withwho:"stringarray"},getList:Ho,onClickDelete:Wo,onClickSubmit:Io}),(s,c)=>(a(),Et($t))}},Dt=E(()=>F().journalEntries),Ao=()=>Dt,Yo=n=>{U(async()=>{const e=await W("/api/journal",n);Dt.value.unshift(e)})};const Go=t("br",null,null,-1),Ro=t("br",null,null,-1),Jo=t("br",null,null,-1),qo=t("br",null,null,-1),Bo={class:"table table-hover"},Ko=t("br",null,null,-1),Qo={setup(n){const e=Math.round(Date.now()/1e3),s=k(""),c=k(""),r=k(""),u=Ao();function _(){const m={date:e,title:s.value,body:c.value,mood:r.value};Yo(m),s.value="",c.value="",r.value=""}return(m,h)=>{const v=B("router-link");return a(),i("form",null,[D(t("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=o=>s.value=o),placeholder:"title",class:"form-control"},null,512),[[S,s.value]]),Go,D(t("input",{type:"text","onUpdate:modelValue":h[1]||(h[1]=o=>r.value=o),placeholder:"mood",class:"form-control"},null,512),[[S,r.value]]),Ro,D(t("textarea",{"onUpdate:modelValue":h[2]||(h[2]=o=>c.value=o),placeholder:"body",class:"form-control",rows:"10"},null,512),[[S,c.value]]),Jo,t("input",{type:"button",value:"submit",onClick:_,class:"btn btn-success"}),qo,t("table",Bo,[t("tbody",null,[(a(!0),i($,null,x(y(u),(o,l)=>(a(),i("tr",{key:o.id},[t("td",null,[V(v,{to:{name:"journal-entry",params:{id:o.id}}},{default:j(()=>[O(b(o.title),1)]),_:2},1032,["to"])]),t("td",null,[O(b(o.mood)+" ",1),Ko]),t("td",null,b(y(L)(o.date).short),1)]))),128))])])])}}},zo={key:0,class:"container"},Xo={setup(n){const e=k(null);return Promise.resolve((async()=>e.value=await N("/api/journal/"+K().params.id))()),(s,c)=>e.value?(a(),i("div",zo,[t("div",null,b(e.value.title),1),t("div",null,b(e.value.mood),1),t("div",null,b(y(L)(e.value.date).short),1),t("div",null,b(e.value.body),1)])):P("",!0)}},q=E(()=>F().goals),Zo=n=>q.value[n],ts=n=>{U(async()=>{const e=await W("/api/goals",n);q.value[n.type]||(q.value[n.type]=[]),q.value[n.type].push(e)})},es=(n,e,s)=>{U(async()=>{await vt("/api/goals/"+n.id,s),q.value[n.type].splice(e,1)})};const ns={class:"container"},os={class:"navbar navbar-default"},ss={class:"container-fluid"},ls={class:"nav navbar-nav"},as={class:"nav-item"},cs={class:"nav-item"},is={class:"nav-item"},us={class:"nav-item"},rs={class:"nav-item"},ds=["placeholder"],ps=["onClick"],_s={setup(n){const e=k("Daily"),s=E(()=>Zo(e.value)),c=k(""),r=k("next Daily goal");function u(h){e.value=h,r.value="next "+h+" goal"}function _(){const h={type:e.value,description:c.value};ts(h),c.value=""}function m(h,v){if(h.completed)return;es(h,v,{op:"replace",path:"/completed",value:!0})}return(h,v)=>(a(),i("div",ns,[t("nav",os,[t("div",ss,[t("ul",ls,[t("li",as,[t("a",{href:"",class:"nav-link",onClick:v[0]||(v[0]=G(o=>u("Daily"),["prevent"]))},"Daily")]),t("li",cs,[t("a",{href:"",class:"nav-link",onClick:v[1]||(v[1]=G(o=>u("Weekly"),["prevent"]))},"Weekly")]),t("li",is,[t("a",{href:"",class:"nav-link",onClick:v[2]||(v[2]=G(o=>u("Monthly"),["prevent"]))},"Monthly")]),t("li",us,[t("a",{href:"",class:"nav-link",onClick:v[3]||(v[3]=G(o=>u("Yearly"),["prevent"]))},"Yearly")]),t("li",rs,[t("a",{href:"",class:"nav-link",onClick:v[4]||(v[4]=G(o=>u("FiveYear"),["prevent"]))},"FiveYear")])])])]),t("div",null,[D(t("input",{type:"text","onUpdate:modelValue":v[5]||(v[5]=o=>c.value=o),placeholder:r.value},null,8,ds),[[S,c.value]]),t("input",{type:"button",value:"submit",onClick:_})]),t("div",null,[t("ul",null,[(a(!0),i($,null,x(y(s),(o,l)=>(a(),i("span",{key:o.id},[t("li",{class:_t({completed:o.completed,notcomplete:!o.completed}),onClick:d=>m(o,l)},b(o.description)+" - "+b(y(L)(o.currentDue).short)+" - "+b(o.dueIn),11,ps)]))),128))])])]))}},hs={class:"container"},vs={key:0},ys={setup(n){const e=k(""),s=k(""),c=()=>{U(async()=>{(await W("/login",{user:e.value,pass:s.value})).success&&(it(!0),st.push("/"))})},r=()=>{U(async()=>{(await N("/logout")).success&&(it(!1),st.push("/"))})};return(u,_)=>(a(),i("div",hs,[y(mt)()?(a(),i("input",{key:1,type:"button",value:"logout",onClick:r})):(a(),i("span",vs,[D(t("input",{type:"text","onUpdate:modelValue":_[0]||(_[0]=m=>e.value=m),placeholder:"user"},null,512),[[S,e.value]]),D(t("input",{type:"password","onUpdate:modelValue":_[1]||(_[1]=m=>s.value=m),placeholder:"pass"},null,512),[[S,s.value]]),t("input",{type:"button",value:"submit",onClick:c})]))]))}},ms=[{path:"/",component:I},{path:"/budget",name:"budget",component:rt},{path:"/budget/date/:yearmonth",component:rt},{path:"/xeffect",name:"xeffect",component:Ye},{path:"/xeffect/defs",name:"xeffectDefs",component:kn},{path:"/xeffect/events/:id",name:"xeffectEvents",component:Dn},{path:"/habits",name:"habits",component:Qn},{path:"/habits/defs",name:"habitsDefs",component:Eo},{path:"/habits/events/:id",name:"habitsEvents",component:Po},{path:"/food",name:"food journal",component:Mo},{path:"/journal",name:"journal",component:Qo},{path:"/journal/:id",name:"journal-entry",component:Xo},{path:"/goals",name:"goals",component:_s},{path:"/exercise",component:I},{path:"/calendar",component:I},{path:"/lists",component:I},{path:"/quotes",component:I},{path:"/reports",component:I},{path:"/login",component:ys}],st=Vt({history:Ft(),routes:ms});Tt(qt).use(st).mount("#app");
